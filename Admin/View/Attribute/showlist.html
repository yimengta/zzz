<script type="text/javascript">
  function show_attr(){
    var type_id = $('#type_id').val();
    // 使用ajax去服务器端，获得属性的信息
    $.ajax({
      url:'__CONTROLLER__/getAttributeByType',
      data:{'type_id':type_id},
      dataType:'json',
      success:function(msg){
        // console.log(msg);
        // 遍历msg与html 代码做结合显示
        var s = '';
        $.each(msg,function(){
          s+='<tr><td width="4%" height="20" bgcolor="d3eaef" class="STYLE10"><div align="center"><input type="checkbox" name="checkbox" id="checkbox" /></div></td><td width="5%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">'+this.attr_id+'</span></div></td><td width="10%" height="20" bgcolor="d3eaef" class="STYLE6" align="left"><div align="center"><span class="STYLE10">'+this.attr_name+'</span></div></td><td width="10%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">'+this.type_name+'</span></div></td><td width="10%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">'+this.attr_write+'</span></div></td><td width="10%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">'+this.attr_opt_vals+'</span></div></td><td height="20" bgcolor="d3eaef" class="STYLE6" align="center"><a href="{:U('tianjia',array('type_id'=>$v['type_id']))}"><span class="STYLE10">编辑|</span></a><a href=""><span class="STYLE10">删除|</span></a><a href="{:U('Attribute/showlist',array('type_id'=>$v['type_id']))}"><span class="STYLE10">属性列表|</span></a><a href=""><span class="STYLE10">查看</span></a></div></td></tr>';
        });
      //   // 再追加
        
      }
    });
        $('attrshow tr:not(:first)').remove();
        $('#attrshow').append(s);   
  }
</script>
 <tr>
   <td colspan="100" class="STYLE22" style="padding:4px;border:1px solid black; ">
   按照商品类型显示
     <select onchange="show_attr" id="type_id">
       <option value="0">请选择</option>
       <volist name="typeinfo" id="v">
       <option value="{$v.type_id}">{$v.type_name}</option>
       </volist>
     </select>
   </td>
 </tr>
  <tr>
    <td>
    <table width="100%" border="0" cellpadding="0" cellspacing="1" bgcolor="#a8c7ce" id="attrshow">
      <tr>
        <td width="4%" height="20" bgcolor="d3eaef" class="STYLE10">
        <div align="center">
        </div></td>
        <td width="5%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">属性id</span></div></td>
        <td width="10%" height="20" bgcolor="d3eaef" class="STYLE6" align="left"><div align="center"><span class="STYLE10">属性名称</span></div></td>
        <td width="10%" height="20" bgcolor="d3eaef" class="STYLE6" align="left"><div align="center"><span class="STYLE10">商品类型</span></div></td>
        <td width="10%" height="20" bgcolor="d3eaef" class="STYLE6" align="left"><div align="center"><span class="STYLE10">录入方式</span></div></td>
        <td width="10%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">可选值</span></div></td>
        <td width="10%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">基本操作</span></div></td>
      </tr>
      <volist name='info' id='v'>
      <tr>
        <td width="4%" height="20" bgcolor="d3eaef" class="STYLE10"><div align="center">
          <input type="checkbox" name="checkbox" id="checkbox" />
        </div></td>
        <td width="5%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">{$v.attr_id}</span></div></td>
        <td width="10%" height="20" bgcolor="d3eaef" class="STYLE6" align="left"><div align="center"><span class="STYLE10">{$v.attr_name}</span></div></td>
        <td width="10%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">{$v.type_name}</span></div></td>
        <td width="10%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">{$v['attr_write']=='0'?'手工录入':'列表选择'}</span></div></td>
        <td width="10%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">{$v.attr_opt_vals}</span></div></td>
        <td height="20" bgcolor="d3eaef" class="STYLE6" align="center">
        <a href="{:U('tianjia',array('type_id'=>$v['type_id']))}"><span class="STYLE10">编辑|</span></a>
        <a href=""><span class="STYLE10">删除|</span></a>
        <a href="{:U('Attribute/showlist',array('type_id'=>$v['type_id']))}"><span class="STYLE10">属性列表|</span></a>
        <a href=""><span class="STYLE10">查看</span></a></div></td>
      </tr>
       </volist>
    </table>
    </td>
  </tr>
 
  <tr>
    <td height="30"><table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td width="33%"><div align="left"><span class="STYLE22">&nbsp;&nbsp;&nbsp;&nbsp;共有<strong> 243</strong> 条记录，当前第<strong> 1</strong> 页，共 <strong>10</strong> 页</span></div></td>
        <td width="67%"><table width="312" border="0" align="right" cellpadding="0" cellspacing="0">
          <tr>
            <td width="49"><div align="center"><img src="__PUBLIC__/Admin/images/main_54.gif" width="40" height="15" /></div></td>
            <td width="49"><div align="center"><img src="__PUBLIC__/Admin/images/main_56.gif" width="45" height="15" /></div></td>
            <td width="49"><div align="center"><img src="__PUBLIC__/Admin/images/main_58.gif" width="45" height="15" /></div></td>
            <td width="49"><div align="center"><img src="__PUBLIC__/Admin/images/main_60.gif" width="40" height="15" /></div></td>
            <td width="37" class="STYLE22"><div align="center">转到</div></td>
            <td width="22"><div align="center">
              <input type="text" name="textfield" id="textfield"  style="width:20px; height:12px; font-size:12px; border:solid 1px #7aaebd;"/>
            </div></td>
            <td width="22" class="STYLE22"><div align="center">页</div></td>
            <td width="35"><img src="__PUBLIC__/Admin/images/main_62.gif" width="26" height="15" /></td>
          </tr>
        </table></td>
      </tr>
    </table></td>
  </tr>

